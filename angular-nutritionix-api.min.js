!function(t,r){"use strict";var e=r.module("nix.api",[]);e.deepMerge=function n(t,e){var i,a;if(arguments.length>2)return n(t,n.apply(null,Array.prototype.slice.call(arguments,1)));i=r.copy(t);for(a in e)e.hasOwnProperty(a)&&(i[a]=i.hasOwnProperty(a)&&r.isObject(i[a])&&r.isObject(e[a])?n(i[a],e[a]):r.copy(e[a]));return i},e.provider("nixApi",function(){var t,n="https://api.nutritionix.com/v2",i={},a={};this.setApiEndpoint=function(t){n=t},t=this.setApiCredentials=function(t,r){i.appId=t,i.appKey=r},this.setHttpConfig=function(t){r.isObject(t)&&(a=t)},this.$get=["$http",function(u){var o=function(t,r){return r=e.deepMerge({method:"GET",url:n+t,headers:{"X-APP-ID":i.appId,"X-APP-KEY":i.appKey},params:{}},a,r),u(r)};return o.setApiCredentials=t,o.autocomplete=function(t){var e=r.isObject(t)?t:{q:t};return o("/autocomplete",{params:e})},o.natural=function(t,r){return o("/natural",{method:"POST",data:t,params:r?{gram_weight:r}:{},headers:{"Content-Type":"text/plain"}})},o.search=function(t,e,n,i){var a,u={q:null,limit:10,offset:0,search_nutrient:"calories"};return a=r.isObject(t)?t:{q:t,limit:e,offset:n,search_nutrient:i},r.forEach(u,function(t,r){a[r]||(a[r]=t)}),o("/search",{params:a})},o.brand_search=function(t,e,n,i,a,u){var s,c={q:null,type:1};return r.isObject(t)?s=t:(s={q:t,type:e},(n||i)&&(s.limit=n,s.offset=i),a&&(s.mobile_calc="true"),u&&(s.desktop_calc="true")),r.forEach(c,function(t,r){s[r]||(s[r]=t)}),o("/search/brands",{params:s})},o.item=function(t){return r.isObject(t)&&(t=t.id||t.resource_id),o("/item/"+t)},o.brand=function(t){return r.isObject(t)&&(t=t.id),o("/brand/"+t)},o}]}),e.filter("nutrient",function(){return function(t,e,n){var i;if(e=parseInt(e),e&&r.isArray(t))for(i in t)if(t.hasOwnProperty(i)&&parseInt(t[i].attr_id)===e)return n?t[i][n]:t[i];return null}})}(window,window.angular);